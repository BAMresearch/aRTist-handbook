

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>BAM CT File Format &mdash; aRTist 2.10.4 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="_static/favicon.ico"/>
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Introduction to Tutorials" href="tutorial_introduction.html" />
    <link rel="prev" title="Menu bar" href="gui-menu-bar.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> aRTist
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui.html">User interface</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">BAM CT File Format</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#header-size-and-data-offset">Header Size and Data Offset</a></li>
<li class="toctree-l2"><a class="reference internal" href="#byte-order">Byte Order</a></li>
<li class="toctree-l2"><a class="reference internal" href="#file-name">File Name</a></li>
<li class="toctree-l2"><a class="reference internal" href="#header-data">Header Data</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Tutorials:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="tutorial_introduction.html">Introduction to Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial_virtual_scene.html">The Virtual Scene</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial_positioning_orientation_size.html">Position, Orientation &amp; Size</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial_materials.html">Materials</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial_projection_images.html">Projection Images</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial_multi_component_parts.html">Multi-Component Parts</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial_ctscan_module.html">CtScan Module</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">aRTist</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>BAM CT File Format</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/bamct_file_format.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="bam-ct-file-format">
<h1>BAM CT File Format<a class="headerlink" href="#bam-ct-file-format" title="Permalink to this headline">¶</a></h1>
<div class="section" id="header-size-and-data-offset">
<h2>Header Size and Data Offset<a class="headerlink" href="#header-size-and-data-offset" title="Permalink to this headline">¶</a></h2>
<p>A BAM CT file starts with a 512 bytes long header. This header may be followed by zero-padding until the actual data block begins. The beginning of the <strong>raw image data block</strong> is located at a multiple of the size of a pixel row (in bytes). If a pixel row needs at least 512 bytes, the data offset can be calculated by</p>
<blockquote>
<div><p>data offset = (number of columns) × (bytes per pixel).</p>
</div></blockquote>
<p>If this data offset is smaller than the significant header size of 512 bytes, the data offset will instead be a multiple of the above-shown row length in bytes:</p>
<blockquote>
<div><p>data offset = <em>N</em> × (number of columns) × (bytes per pixel)</p>
</div></blockquote>
<p>with the smallest integer <em>N</em> that leads to a data offset ≥ 512.</p>
<p>For example, if you have X-ray projections with 1000 pixel columns and 16 bit grey values (i.e. 2 bytes per pixel), the data offset will be at</p>
<blockquote>
<div><p>data offset = 1000 px × 2 bytes/px = 2000 bytes.</p>
</div></blockquote>
</div>
<div class="section" id="byte-order">
<h2>Byte Order<a class="headerlink" href="#byte-order" title="Permalink to this headline">¶</a></h2>
<p>Any header or image data unit that is stored in more than 1 byte can be either written in <em>big-endian byte order</em> or in <em>little-endian byte order</em>. Since today’s CPUs usually operate in little-endian mode, this is the byte order that BAM CT files generated with <em>aRT</em>ist use.</p>
</div>
<div class="section" id="file-name">
<h2>File Name<a class="headerlink" href="#file-name" title="Permalink to this headline">¶</a></h2>
<p>The BAM CT header starts with 12 bytes that contain a “file name” (a string of twelve 1-byte characters, not null-terminated). It follows a structure that reveals additional information:</p>
<ul>
<li><p>character 0 to 6: arbitrary name</p></li>
<li><p>character 7: must be a dot <code class="code docutils literal notranslate"><span class="pre">.</span></code></p></li>
<li><p>character 8: content type</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">d</span></code> for projection data</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">b</span></code> for tomograms (“Bild”)</p></li>
</ul>
</div></blockquote>
</li>
<li><p>character 9: CT device code (a BAM internal ID)</p></li>
<li><p>character 10: image data type:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">c</span></code>: 8 bit unsigned int</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">s</span></code>: 16 bit unsigned int</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">i</span></code>: 32 bit unsigned int</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">r</span></code>: 32 bit float (real)</p></li>
</ul>
</div></blockquote>
</li>
<li><p>character 11: byte order:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">s</span></code>: little endian</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">x</span></code>: big endian</p></li>
</ul>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="header-data">
<h2>Header Data<a class="headerlink" href="#header-data" title="Permalink to this headline">¶</a></h2>
<p>The following table lists the elements of a BAM CT header.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The element at <strong>offset 12 (0xC)</strong> represents one of the following:</p>
<ul class="simple">
<li><p>for <strong>tomograms:</strong> the number of rows in an image</p></li>
<li><p>for <strong>projections:</strong> (number of rows) × (number of angular steps)</p></li>
</ul>
<p>The <strong>direction of rotation</strong> is given by the sign of the number of angular steps up to 180° (offset 24, 0x18) and the sign of the <strong>angular step size</strong> (offset 176, 0xB0). Their values are positive for counter-clockwise rotations (CCW) and negative for clockwise rotations (CW).</p>
<p>You can calculate the detector’s pixel size from the <strong>voxel size</strong> (offset 112, 0x70):</p>
<blockquote>
<div><p>pixel size = (voxel size) * SDD / SOD</p>
</div></blockquote>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 5%" />
<col style="width: 6%" />
<col style="width: 6%" />
<col style="width: 15%" />
<col style="width: 67%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Byte</p></th>
<th class="head"><p>(hex)</p></th>
<th class="head"><p>Count</p></th>
<th class="head"><p>Data Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0</p></td>
<td><p>0x00</p></td>
<td><p>12</p></td>
<td><p>8 bit char</p></td>
<td><p>File name, see above</p></td>
</tr>
<tr class="row-odd"><td><p>12</p></td>
<td><p>0x0C</p></td>
<td><p>1</p></td>
<td><p>32 bit uint</p></td>
<td><p>Number of rows (X) or rows × angular steps, see above</p></td>
</tr>
<tr class="row-even"><td><p>16</p></td>
<td><p>0x10</p></td>
<td><p>1</p></td>
<td><p>32 bit uint</p></td>
<td><p>Number of columns (Y)</p></td>
</tr>
<tr class="row-odd"><td><p>20</p></td>
<td><p>0x14</p></td>
<td><p>1</p></td>
<td><p>32 bit uint</p></td>
<td><p>Number of angular steps</p></td>
</tr>
<tr class="row-even"><td><p>24</p></td>
<td><p>0x18</p></td>
<td><p>1</p></td>
<td><p>32 bit int</p></td>
<td><p>Number of angular steps up to 180°</p></td>
</tr>
<tr class="row-odd"><td><p>28</p></td>
<td><p>0x1C</p></td>
<td><p>1</p></td>
<td><p>32 bit uint</p></td>
<td><p>Number of slices (Z)</p></td>
</tr>
<tr class="row-even"><td><p>32</p></td>
<td><p>0x20</p></td>
<td><p>1</p></td>
<td><p>32 bit uint</p></td>
<td><p>Number of translations</p></td>
</tr>
<tr class="row-odd"><td><p>36</p></td>
<td><p>0x24</p></td>
<td><p>1</p></td>
<td><p>32 bit uint</p></td>
<td><p>Number of intermediate angles</p></td>
</tr>
<tr class="row-even"><td><p>40</p></td>
<td><p>0x28</p></td>
<td><p>1</p></td>
<td><p>32 bit uint</p></td>
<td><p>Number of margin points</p></td>
</tr>
<tr class="row-odd"><td><p>44</p></td>
<td><p>0x2C</p></td>
<td><p>1</p></td>
<td><p>32 bit uint</p></td>
<td><p>Number of detectors</p></td>
</tr>
<tr class="row-even"><td><p>48</p></td>
<td><p>0x30</p></td>
<td><p>1</p></td>
<td><p>32 bit uint</p></td>
<td><p>Bytes per pixel</p></td>
</tr>
<tr class="row-odd"><td><p>52</p></td>
<td><p>0x34</p></td>
<td><p>1</p></td>
<td><p>32 bit uint</p></td>
<td><p>Number of diodes per detector</p></td>
</tr>
<tr class="row-even"><td><p>56</p></td>
<td><p>0x38</p></td>
<td><p>6</p></td>
<td><p>32 bit uint</p></td>
<td><p><em>Reserved</em></p></td>
</tr>
<tr class="row-odd"><td><p>80</p></td>
<td><p>0x50</p></td>
<td><p>1</p></td>
<td><p>32 bit float</p></td>
<td><p>Minimum attenuation coefficient [1/cm]</p></td>
</tr>
<tr class="row-even"><td><p>84</p></td>
<td><p>0x54</p></td>
<td><p>1</p></td>
<td><p>32 bit float</p></td>
<td><p>Maximum attenuation coefficient [1/cm]</p></td>
</tr>
<tr class="row-odd"><td><p>88</p></td>
<td><p>0x58</p></td>
<td><p>1</p></td>
<td><p>32 bit float</p></td>
<td><p>Total number of photons</p></td>
</tr>
<tr class="row-even"><td><p>92</p></td>
<td><p>0x5C</p></td>
<td><p>1</p></td>
<td><p>32 bit float</p></td>
<td><p>Measurement time per point [s]</p></td>
</tr>
<tr class="row-odd"><td><p>96</p></td>
<td><p>0x60</p></td>
<td><p>1</p></td>
<td><p>32 bit float</p></td>
<td><p>Velocity number</p></td>
</tr>
<tr class="row-even"><td><p>100</p></td>
<td><p>0x64</p></td>
<td><p>1</p></td>
<td><p>32 bit float</p></td>
<td><p>Start angle</p></td>
</tr>
<tr class="row-odd"><td><p>104</p></td>
<td><p>0x68</p></td>
<td><p>1</p></td>
<td><p>32 bit float</p></td>
<td><p>Scan centre point [mm] (horizontal position)</p></td>
</tr>
<tr class="row-even"><td><p>108</p></td>
<td><p>0x6C</p></td>
<td><p>1</p></td>
<td><p>32 bit float</p></td>
<td><p>Scan length without ramp [mm]</p></td>
</tr>
<tr class="row-odd"><td><p>112</p></td>
<td><p>0x70</p></td>
<td><p>1</p></td>
<td><p>32 bit float</p></td>
<td><p>Voxel size [mm] (sample size)</p></td>
</tr>
<tr class="row-even"><td><p>116</p></td>
<td><p>0x74</p></td>
<td><p>1</p></td>
<td><p>32 bit float</p></td>
<td><p>Stage elevation [mm] (vertical position)</p></td>
</tr>
<tr class="row-odd"><td><p>120</p></td>
<td><p>0x78</p></td>
<td><p>1</p></td>
<td><p>32 bit float</p></td>
<td><p>Elevation increment [mm]</p></td>
</tr>
<tr class="row-even"><td><p>124</p></td>
<td><p>0x7C</p></td>
<td><p>1</p></td>
<td><p>32 bit float</p></td>
<td><p>Source-object distance SOD [mm]</p></td>
</tr>
<tr class="row-odd"><td><p>128</p></td>
<td><p>0x80</p></td>
<td><p>1</p></td>
<td><p>32 bit float</p></td>
<td><p>Source-detector distance SDD [mm]</p></td>
</tr>
<tr class="row-even"><td><p>132</p></td>
<td><p>0x84</p></td>
<td><p>1</p></td>
<td><p>32 bit float</p></td>
<td><p>Source elevation [mm] (vertical position)</p></td>
</tr>
<tr class="row-odd"><td><p>136</p></td>
<td><p>0x88</p></td>
<td><p>1</p></td>
<td><p>32 bit float</p></td>
<td><p>Source centre [mm] (horizontal position)</p></td>
</tr>
<tr class="row-even"><td><p>140</p></td>
<td><p>0x8C</p></td>
<td><p>1</p></td>
<td><p>32 bit float</p></td>
<td><p>Source distance [mm] (magnificational position)</p></td>
</tr>
<tr class="row-odd"><td><p>144</p></td>
<td><p>0x90</p></td>
<td><p>1</p></td>
<td><p>32 bit float</p></td>
<td><p>Detector elevation [mm] (vertical position)</p></td>
</tr>
<tr class="row-even"><td><p>148</p></td>
<td><p>0x94</p></td>
<td><p>1</p></td>
<td><p>32 bit float</p></td>
<td><p>Detector centre [mm] (horizontal position)</p></td>
</tr>
<tr class="row-odd"><td><p>152</p></td>
<td><p>0x98</p></td>
<td><p>1</p></td>
<td><p>32 bit float</p></td>
<td><p>Detector distance [mm] (magnificational position)</p></td>
</tr>
<tr class="row-even"><td><p>156</p></td>
<td><p>0x9C</p></td>
<td><p>1</p></td>
<td><p>32 bit float</p></td>
<td><p>Spacer elevation [mm] (thickness)</p></td>
</tr>
<tr class="row-odd"><td><p>160</p></td>
<td><p>0xA0</p></td>
<td><p>1</p></td>
<td><p>32 bit float</p></td>
<td><p>Object weight [kg]</p></td>
</tr>
<tr class="row-even"><td><p>164</p></td>
<td><p>0xA4</p></td>
<td><p>1</p></td>
<td><p>32 bit float</p></td>
<td><p>Beam elevation [mm]</p></td>
</tr>
<tr class="row-odd"><td><p>168</p></td>
<td><p>0xA8</p></td>
<td><p>1</p></td>
<td><p>32 bit float</p></td>
<td><p>Collimator width [mm]</p></td>
</tr>
<tr class="row-even"><td><p>172</p></td>
<td><p>0xAC</p></td>
<td><p>1</p></td>
<td><p>32 bit float</p></td>
<td><p>Collimator height [mm]</p></td>
</tr>
<tr class="row-odd"><td><p>176</p></td>
<td><p>0xB0</p></td>
<td><p>1</p></td>
<td><p>32 bit float</p></td>
<td><p>Angular step size between images [deg]</p></td>
</tr>
<tr class="row-even"><td><p>180</p></td>
<td><p>0xB4</p></td>
<td><p>1</p></td>
<td><p>32 bit float</p></td>
<td><p>PCD clear time per point [s]</p></td>
</tr>
<tr class="row-odd"><td><p>184</p></td>
<td><p>0xB8</p></td>
<td><p>1</p></td>
<td><p>32 bit float</p></td>
<td><p>Density correction factor [g/cm]</p></td>
</tr>
<tr class="row-even"><td><p>188</p></td>
<td><p>0xBC</p></td>
<td><p>1</p></td>
<td><p>32 bit float</p></td>
<td><p>ROI centre [mm]</p></td>
</tr>
<tr class="row-odd"><td><p>192</p></td>
<td><p>0xC0</p></td>
<td><p>1</p></td>
<td><p>32 bit float</p></td>
<td><p>ROI distance [mm]</p></td>
</tr>
<tr class="row-even"><td><p>196</p></td>
<td><p>0xC4</p></td>
<td><p>1</p></td>
<td><p>32 bit float</p></td>
<td><p><em>Reserved</em></p></td>
</tr>
<tr class="row-odd"><td><p>200</p></td>
<td><p>0xC8</p></td>
<td><p>8</p></td>
<td><p>8 bit char</p></td>
<td><p>Source type</p></td>
</tr>
<tr class="row-even"><td><p>208</p></td>
<td><p>0xD0</p></td>
<td><p>8</p></td>
<td><p>8 bit char</p></td>
<td><p>Source energy</p></td>
</tr>
<tr class="row-odd"><td><p>216</p></td>
<td><p>0xD8</p></td>
<td><p>8</p></td>
<td><p>8 bit char</p></td>
<td><p>Source intensity</p></td>
</tr>
<tr class="row-even"><td><p>224</p></td>
<td><p>0xE0</p></td>
<td><p>8</p></td>
<td><p>8 bit char</p></td>
<td><p>Detector type</p></td>
</tr>
<tr class="row-odd"><td><p>232</p></td>
<td><p>0xE8</p></td>
<td><p>80</p></td>
<td><p>8 bit char</p></td>
<td><p>Sample name</p></td>
</tr>
<tr class="row-even"><td><p>312</p></td>
<td><p>0x138</p></td>
<td><p>4</p></td>
<td><p>8 bit char</p></td>
<td><p>Program ID</p></td>
</tr>
<tr class="row-odd"><td><p>316</p></td>
<td><p>0x13C</p></td>
<td><p>16</p></td>
<td><p>8 bit char</p></td>
<td><p>Measurement start time (TT.MM.JJJJ/hh:mm)</p></td>
</tr>
<tr class="row-even"><td><p>332</p></td>
<td><p>0x14C</p></td>
<td><p>16</p></td>
<td><p>8 bit char</p></td>
<td><p>Measurement stop time (TT.MM.JJJJ/hh:mm)</p></td>
</tr>
<tr class="row-odd"><td><p>348</p></td>
<td><p>0x15C</p></td>
<td><p>16</p></td>
<td><p>8 bit char</p></td>
<td><p>Time and date of last edit (TT.MM.JJJJ/hh:mm)</p></td>
</tr>
<tr class="row-even"><td><p>364</p></td>
<td><p>0x16C</p></td>
<td><p>12</p></td>
<td><p>8 bit char</p></td>
<td><p>Look Up Table File 1</p></td>
</tr>
<tr class="row-odd"><td><p>376</p></td>
<td><p>0x178</p></td>
<td><p>12</p></td>
<td><p>8 bit char</p></td>
<td><p>Look Up Table File 2</p></td>
</tr>
<tr class="row-even"><td><p>388</p></td>
<td><p>0x184</p></td>
<td><p>12</p></td>
<td><p>8 bit char</p></td>
<td><p>Look Up Table File 3</p></td>
</tr>
<tr class="row-odd"><td><p>400</p></td>
<td><p>0x190</p></td>
<td><p>12</p></td>
<td><p>8 bit char</p></td>
<td><p>Tube filter</p></td>
</tr>
<tr class="row-even"><td><p>412</p></td>
<td><p>0x19C</p></td>
<td><p>96</p></td>
<td><p>8 bit char</p></td>
<td><p>Processing steps</p></td>
</tr>
<tr class="row-odd"><td><p>508</p></td>
<td><p>0x1FC</p></td>
<td><p>4</p></td>
<td><p>8 bit char</p></td>
<td><p>Reserved</p></td>
</tr>
<tr class="row-even"><td><p>512</p></td>
<td><p>0x200</p></td>
<td></td>
<td></td>
<td><p>Data or zero-padding until data offset, see above</p></td>
</tr>
</tbody>
</table>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="tutorial_introduction.html" class="btn btn-neutral float-right" title="Introduction to Tutorials" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="gui-menu-bar.html" class="btn btn-neutral float-left" title="Menu bar" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, BAM, Bundesanstalt für Materialforschung und -prüfung.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>